!function(){"use strict";function t(){}function n(t){return t()}function s(){return Object.create(null)}function e(t){t.forEach(n)}function a(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function r(t,n,s){t.insertBefore(n,s||null)}function i(t){t.parentNode.removeChild(t)}function c(t,n){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(n)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function f(t,n,s,e){return t.addEventListener(n,s,e),()=>t.removeEventListener(n,s,e)}function h(t,n,s){null==s?t.removeAttribute(n):t.getAttribute(n)!==s&&t.setAttribute(n,s)}function g(t,n){n=""+n,t.data!==n&&(t.data=n)}function p(t,n,s,e){t.style.setProperty(n,s,e?"important":"")}let y;function b(t){y=t}function x(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const _=[],w=[],v=[],$=[],N=Promise.resolve();let O=!1;function A(t){v.push(t)}function R(){const t=new Set;do{for(;_.length;){const t=_.shift();b(t),I(t.$$)}for(;w.length;)w.pop()();for(let n=0;n<v.length;n+=1){const s=v[n];t.has(s)||(s(),t.add(s))}v.length=0}while(_.length);for(;$.length;)$.pop()();O=!1}function I(t){null!==t.fragment&&(t.update(t.dirty),e(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(A))}const k=new Set;const K="undefined"!=typeof window?window:global;function G(t,n){t.$$.dirty||(_.push(t),O||(O=!0,N.then(R)),t.$$.dirty=s()),t.$$.dirty[n]=!0}function W(o,l,r,i,c,u){const d=y;b(o);const m=l.props||{},f=o.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:s(),dirty:null};let h=!1;var g,p;f.ctx=r?r(o,m,(t,n,s=n)=>(f.ctx&&c(f.ctx[t],f.ctx[t]=s)&&(f.bound[t]&&f.bound[t](s),h&&G(o,t)),n)):m,f.update(),h=!0,e(f.before_update),f.fragment=!!i&&i(f.ctx),l.target&&(l.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(l.target)):f.fragment&&f.fragment.c(),l.intro&&((g=o.$$.fragment)&&g.i&&(k.delete(g),g.i(p))),function(t,s,o){const{fragment:l,on_mount:r,on_destroy:i,after_update:c}=t.$$;l&&l.m(s,o),A(()=>{const s=r.map(n).filter(a);i?i.push(...s):e(s),t.$$.on_mount=[]}),c.forEach(A)}(o,l.target,l.anchor),R()),b(d)}class C{$destroy(){!function(t,n){const s=t.$$;null!==s.fragment&&(e(s.on_destroy),s.fragment&&s.fragment.d(n),s.on_destroy=s.fragment=null,s.ctx={})}(this,1),this.$destroy=t}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}$set(){}}const{Object:D}=K;function S(t,n,s){const e=D.create(t);return e.mystatus=n[s],e}function E(t,n,s){const e=D.create(t);return e.host=n[s],e}function T(t,n,s){const e=D.create(t);return e.mystatus=n[s],e}function L(t,n,s){const e=D.create(t);return e.host=n[s],e}function j(n){let s,e;return{c(){s=u("div"),(e=u("span")).textContent=`${n.msg("dashboard_nagiosNotLoaded")}`,h(e,"class","alert alert-info alert-dismissable margin-bottom-10"),p(s,"padding","20px")},m(t,n){r(t,s,n),l(s,e)},p:t,d(t){t&&i(s)}}}function z(t){let n,s,e="down"!=t.show&&B(t),a="down"==t.show&&P(t);return{c(){n=u("div"),e&&e.c(),s=m(),a&&a.c(),h(n,"class","padding:10px;")},m(t,o){r(t,n,o),e&&e.m(n,null),l(n,s),a&&a.m(n,null)},p(t,o){"down"!=o.show?e?e.p(t,o):((e=B(o)).c(),e.m(n,s)):e&&(e.d(1),e=null),"down"==o.show?a?a.p(t,o):((a=P(o)).c(),a.m(n,null)):a&&(a.d(1),a=null)},d(t){t&&i(n),e&&e.d(),a&&a.d()}}}function B(t){let n,s=t.hosts,e=[];for(let n=0;n<s.length;n+=1)e[n]=M(L(t,s,n));return{c(){n=u("div");for(let t=0;t<e.length;t+=1)e[t].c();p(n,"padding","10px")},m(t,s){r(t,n,s);for(let t=0;t<e.length;t+=1)e[t].m(n,null)},p(t,a){if(t.hosts){let o;for(s=a.hosts,o=0;o<s.length;o+=1){const l=L(a,s,o);e[o]?e[o].p(t,l):(e[o]=M(l),e[o].c(),e[o].m(n,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=s.length}},d(t){t&&i(n),c(e,t)}}}function H(t){let n,s=t.host.nagios.status.service_status,e=[];for(let n=0;n<s.length;n+=1)e[n]=F(T(t,s,n));return{c(){n=u("div");for(let t=0;t<e.length;t+=1)e[t].c();p(n,"margin-top","-15px")},m(t,s){r(t,n,s);for(let t=0;t<e.length;t+=1)e[t].m(n,null)},p(t,a){if(t.hosts){let o;for(s=a.host.nagios.status.service_status,o=0;o<s.length;o+=1){const l=T(a,s,o);e[o]?e[o].p(t,l):(e[o]=F(l),e[o].c(),e[o].m(n,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=s.length}},d(t){t&&i(n),c(e,t)}}}function F(t){let n,s,e,a,o,c=t.mystatus.service_display_name+"";return{c(){n=u("span"),s=d(c),e=m(),h(n,"class",a="badge "+t.mystatus.badgeColor+" font-size-xs"),p(n,"font-weight","normal"),p(n,"margin","3px"),h(n,"title",o=t.mystatus.status_information),h(n,"rel","tooltip")},m(t,a){r(t,n,a),l(n,s),l(n,e)},p(t,e){t.hosts&&c!==(c=e.mystatus.service_display_name+"")&&g(s,c),t.hosts&&a!==(a="badge "+e.mystatus.badgeColor+" font-size-xs")&&h(n,"class",a),t.hosts&&o!==(o=e.mystatus.status_information)&&h(n,"title",o)},d(t){t&&i(n)}}}function M(t){let n,s,e,a,o,c,f,y,b,x,_,w=t.host.name+"",v="OK"!=t.host.summary&&null!=t.host.nagios&&H(t);return{c(){n=u("div"),s=u("div"),e=u("div"),a=u("i"),c=m(),f=u("span"),y=d(w),x=m(),v&&v.c(),_=m(),h(a,"class",o="fa "+("OK"==t.host.summary?"fa-check":"WARNING"==t.host.summary?"fa-exclamation-triangle":"fa-times-circle")),p(f,"margin","5px"),h(e,"class",b="label "+("OK"==t.host.summary?"label-intranda-green":"WARNING"==t.host.summary?"label-intranda-orange":"label-intranda-red")),p(e,"position","relative"),p(e,"top","-1em"),p(e,"font-size","14px"),p(e,"font-weight","normal"),p(e,"padding","5px"),p(e,"display","inline-block"),p(e,"border","white solid 5px"),p(s,"height","1px"),p(s,"background-color","#cccccc"),p(s,"text-align","left"),p(s,"margin","25px 20px 40px 0px")},m(t,o){r(t,n,o),l(n,s),l(s,e),l(e,a),l(e,c),l(e,f),l(f,y),l(n,x),v&&v.m(n,null),l(n,_)},p(t,s){t.hosts&&o!==(o="fa "+("OK"==s.host.summary?"fa-check":"WARNING"==s.host.summary?"fa-exclamation-triangle":"fa-times-circle"))&&h(a,"class",o),t.hosts&&w!==(w=s.host.name+"")&&g(y,w),t.hosts&&b!==(b="label "+("OK"==s.host.summary?"label-intranda-green":"WARNING"==s.host.summary?"label-intranda-orange":"label-intranda-red"))&&h(e,"class",b),"OK"!=s.host.summary&&null!=s.host.nagios?v?v.p(t,s):((v=H(s)).c(),v.m(n,_)):v&&(v.d(1),v=null)},d(t){t&&i(n),v&&v.d()}}}function P(t){let n,s,e,a=t.hosts,o=[];for(let n=0;n<a.length;n+=1)o[n]=V(E(t,a,n));return{c(){n=u("div"),s=u("table"),e=u("tbody");for(let t=0;t<o.length;t+=1)o[t].c();h(s,"class","table table-hover responsive")},m(t,a){r(t,n,a),l(n,s),l(s,e);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,n){if(t.hosts){let s;for(a=n.hosts,s=0;s<a.length;s+=1){const l=E(n,a,s);o[s]?o[s].p(t,l):(o[s]=V(l),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=a.length}},d(t){t&&i(n),c(o,t)}}}function q(t){let n,s,e=t.mystatus.service_display_name+"";return{c(){n=u("span"),s=d(e),h(n,"class","badge badge-intranda-green"),p(n,"font-weight","normal")},m(t,e){r(t,n,e),l(n,s)},p(t,n){t.hosts&&e!==(e=n.mystatus.service_display_name+"")&&g(s,e)},d(t){t&&i(n)}}}function J(t){let n,s,e=t.mystatus.service_display_name+"";return{c(){n=u("span"),s=d(e),h(n,"class","badge badge-intranda-orange"),p(n,"font-weight","normal")},m(t,e){r(t,n,e),l(n,s)},p(t,n){t.hosts&&e!==(e=n.mystatus.service_display_name+"")&&g(s,e)},d(t){t&&i(n)}}}function Q(t){let n,s,e=t.mystatus.service_display_name+"";return{c(){n=u("span"),s=d(e),h(n,"class","badge badge-intranda-red"),p(n,"font-weight","normal")},m(t,e){r(t,n,e),l(n,s)},p(t,n){t.hosts&&e!==(e=n.mystatus.service_display_name+"")&&g(s,e)},d(t){t&&i(n)}}}function U(t){let n,s,e,a,o,c,f,h,p=t.mystatus.status_information+"",y=("OK"==t.mystatus.status||"SOFT"==t.mystatus.state_type)&&q(t),b="WARNING"==t.mystatus.status&&"HARD"==t.mystatus.state_type&&J(t),x="CRITICAL"==t.mystatus.status&&"HARD"==t.mystatus.state_type&&Q(t);return{c(){n=u("tr"),s=u("td"),y&&y.c(),e=m(),b&&b.c(),a=m(),x&&x.c(),o=m(),c=u("td"),f=d(p),h=m()},m(t,i){r(t,n,i),l(n,s),y&&y.m(s,null),l(s,e),b&&b.m(s,null),l(s,a),x&&x.m(s,null),l(n,o),l(n,c),l(c,f),l(n,h)},p(t,n){"OK"==n.mystatus.status||"SOFT"==n.mystatus.state_type?y?y.p(t,n):((y=q(n)).c(),y.m(s,e)):y&&(y.d(1),y=null),"WARNING"==n.mystatus.status&&"HARD"==n.mystatus.state_type?b?b.p(t,n):((b=J(n)).c(),b.m(s,a)):b&&(b.d(1),b=null),"CRITICAL"==n.mystatus.status&&"HARD"==n.mystatus.state_type?x?x.p(t,n):((x=Q(n)).c(),x.m(s,null)):x&&(x.d(1),x=null),t.hosts&&p!==(p=n.mystatus.status_information+"")&&g(f,p)},d(t){t&&i(n),y&&y.d(),b&&b.d(),x&&x.d()}}}function V(t){let n,s,e,a,o,f,y,b,x,_,w,v=t.host.name+"",$=t.host.nagios.status.service_status,N=[];for(let n=0;n<$.length;n+=1)N[n]=U(S(t,$,n));return{c(){n=u("tr"),s=u("td"),e=u("div"),a=u("i"),f=m(),y=u("span"),b=d(v),_=m();for(let t=0;t<N.length;t+=1)N[t].c();w=d(""),h(a,"class",o="fa "+("OK"==t.host.summary?"fa-check":"WARNING"==t.host.summary?"fa-exclamation-triangle":"fa-times-circle")),p(y,"margin","5px"),h(e,"class",x="label "+("OK"==t.host.summary?"label-intranda-green":"WARNING"==t.host.summary?"label-intranda-orange":"label-intranda-red")),p(e,"font-size","14px"),p(e,"font-weight","normal"),p(e,"padding","5px"),p(e,"margin","0px"),p(e,"display","block"),h(s,"colspan","2")},m(t,o){r(t,n,o),l(n,s),l(s,e),l(e,a),l(e,f),l(e,y),l(y,b),r(t,_,o);for(let n=0;n<N.length;n+=1)N[n].m(t,o);r(t,w,o)},p(t,n){if(t.hosts&&o!==(o="fa "+("OK"==n.host.summary?"fa-check":"WARNING"==n.host.summary?"fa-exclamation-triangle":"fa-times-circle"))&&h(a,"class",o),t.hosts&&v!==(v=n.host.name+"")&&g(b,v),t.hosts&&x!==(x="label "+("OK"==n.host.summary?"label-intranda-green":"WARNING"==n.host.summary?"label-intranda-orange":"label-intranda-red"))&&h(e,"class",x),t.hosts){let s;for($=n.host.nagios.status.service_status,s=0;s<$.length;s+=1){const e=S(n,$,s);N[s]?N[s].p(t,e):(N[s]=U(e),N[s].c(),N[s].m(w.parentNode,w))}for(;s<N.length;s+=1)N[s].d(1);N.length=$.length}},d(t){t&&i(n),t&&i(_),c(N,t),t&&i(w)}}}function X(n){let s,a,o,c,d,g,p,y,b,x,_,w,v,$,N,O,A,R=0==n.hosts.length&&j(n),I=0!=n.hosts.length&&z(n);return{c(){s=u("div"),a=u("div"),(o=u("h3")).innerHTML='<i class="fa fa-binoculars"></i>\n\t\t\tMonitoring\n\t\t',c=m(),d=u("div"),g=u("a"),p=u("i"),b=m(),x=u("a"),_=u("i"),$=m(),N=u("div"),R&&R.c(),O=m(),I&&I.c(),h(p,"class","fa fa-refresh"),h(g,"class","btn btn-mini"),h(g,"title",y=n.msg("reload")),h(_,"class",w="fa "+("down"==n.show?"fa-angle-up":"fa-angle-down")),h(x,"class","btn btn-mini"),h(x,"title",v="up"==n.show?n.msg("showBoxDetailsOn"):n.msg("showBoxDetailsOff")),h(d,"class","actions"),h(a,"class","box-title"),h(N,"class","box-content nopadding"),h(s,"class","box box-color lightgrey box-bordered"),A=[f(g,"click",n.reload),f(x,"click",n.toggleShow)]},m(t,n){r(t,s,n),l(s,a),l(a,o),l(a,c),l(a,d),l(d,g),l(g,p),l(d,b),l(d,x),l(x,_),l(s,$),l(s,N),R&&R.m(N,null),l(N,O),I&&I.m(N,null)},p(t,n){t.show&&w!==(w="fa "+("down"==n.show?"fa-angle-up":"fa-angle-down"))&&h(_,"class",w),t.show&&v!==(v="up"==n.show?n.msg("showBoxDetailsOn"):n.msg("showBoxDetailsOff"))&&h(x,"title",v),0==n.hosts.length?R?R.p(t,n):((R=j(n)).c(),R.m(N,O)):R&&(R.d(1),R=null),0!=n.hosts.length?I?I.p(t,n):((I=z(n)).c(),I.m(N,null)):I&&(I.d(1),I=null)},i:t,o:t,d(t){t&&i(s),R&&R.d(),I&&I.d(),e(A)}}}function Y(t,n,s){x(()=>{l()});let{msgs:e}=n,a=[],o="up",l=()=>{a.length>0&&s("hosts",a=[]),fetch("/goobi/plugins/exdashboard/nagios").then(t=>{t.json().then(t=>{for(var n of(s("hosts",a=t),a))if(n.nagios)for(var e of n.nagios.status.service_status)e.badgeColor=r(e)})})},r=t=>"OK"==t.status||"SOFT"==t.state_type?"badge-intranda-green":"WARNING"==t.status?"badge-intranda-orange":"badge-intranda-red";return t.$set=t=>{"msgs"in t&&s("msgs",e=t.msgs)},{msgs:e,hosts:a,show:o,reload:l,msg:t=>0==Object.keys(e).length?"*".repeat(t.length):e[t]?e[t]:"???"+t+"???",toggleShow:()=>{s("show",o="up"==o?"down":"up")}}}window.mountSvelteNagios=class extends C{constructor(t){super(),W(this,t,Y,X,o,{msgs:0})}}}();
//# sourceMappingURL=bundle.js.map
